{
	"info": {
		"_postman_id": "v3-complete-markets-2025",
		"name": "Bastion API v3 - Complete Markets",
		"description": "🚀 **Bastion API v3 - Complete Markets Collection**\n\n**✅ MULTI-MARKET ARCHITECTURE - BONDS, CEDEARS & STOCKS**\n\nColección completa con todos los mercados implementados y validados.\n\n## 🏗️ **Arquitectura v3**\n```\n/api/v1/\n├── bonds/\n│   ├── instruments/       ✅ Gestión de instrumentos\n│   ├── market-data/      ✅ OHLC y datos de mercado\n│   ├── yields/           ✅ Curvas de rendimiento\n│   └── analytics/        ✅ Pricing y métricas\n├── cedears/\n│   ├── instruments/      ✅ Gestión de CEDEARs\n│   ├── market-data/      ✅ OHLC y datos de mercado\n│   └── analytics/        🔄 Placeholder\n└── stocks/\n    ├── instruments/      ✅ Gestión de acciones\n    ├── market-data/      ✅ OHLC y datos de mercado\n    └── analytics/        🔄 Placeholder\n```\n\n## 🔐 **Authorization**\n\n**Un único token funciona para todos los mercados según los scopes otorgados:**\n\n- `bonds:read` - Acceso al mercado de bonos\n- `cedears:read` - Acceso al mercado de CEDEARs\n- `stocks:read` - Acceso al mercado de acciones\n\nEjemplo: Un token con scope `\"bonds:read cedears:read\"` puede acceder a endpoints de bonos y CEDEARs, pero no de stocks.\n\n## 📊 **Endpoints por Mercado**\n\n### 🏛️ **BONDS (Completo)**\n- ✅ Instruments: List, Detail, Search\n- ✅ Market Data: OHLC, Intraday\n- ✅ Yields: Curve, Historical Curve\n- ✅ Analytics: Pricing, Cashflow, Risk Metrics\n\n### 🌎 **CEDEARS (Nuevo)**\n- ✅ Instruments: List, Detail, Search\n- ✅ Market Data: OHLC, Intraday\n- 🔄 Analytics: Placeholder\n\n### 📈 **STOCKS (Nuevo)**\n- ✅ Instruments: List, Detail, Search\n- ✅ Market Data: OHLC, Intraday\n- 🔄 Analytics: Placeholder\n\n## 🎯 **Nexus Integration**\n- market=\"BOND\" para bonos\n- market=\"CEDEAR\" para CEDEARs\n- market=\"STOCK\" para acciones\n- Ticker normalization (\" - 24hs\" suffix)\n- Paginación cursor-based en todos los endpoints\n\n## 🔧 **Features v3**\n- ✅ Multi-market support\n- ✅ Granular authorization con scopes\n- ✅ Single token para múltiples mercados\n- ✅ Consistent response formats\n- ✅ Comprehensive error handling\n- ✅ Pagination support\n- ✅ Real Nexus integration\n\n**🎉 Ready for complete market testing!**",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
		"_exporter_id": "bastion-v3"
	},
	"item": [
		{
			"name": "🔐 Authentication",
			"item": [
				{
					"name": "Get Access Token",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"if (pm.response.code === 200) {",
									"    const response = pm.response.json();",
									"    pm.environment.set('access_token', response.access_token);",
									"    ",
									"    pm.test('✅ Token generated successfully', function() {",
									"        pm.expect(response.access_token).to.be.a('string');",
									"        pm.expect(response.scope).to.be.a('string');",
									"    });",
									"    ",
									"    // Log scopes granted",
									"    console.log('Scopes granted: ' + response.scope);",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [{"key": "Content-Type", "value": "application/json"}],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"grant_type\": \"client_credentials\",\n  \"client_id\": \"{{client_id}}\",\n  \"client_secret\": \"{{client_secret}}\",\n  \"scope\": \"bonds:read cedears:read stocks:read\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{baseUrl}}/api/v1/auth/token",
							"host": ["{{baseUrl}}"],
							"path": ["api", "v1", "auth", "token"]
						},
						"description": "Obtiene un token de acceso con los scopes solicitados.\n\n**Scopes disponibles:**\n- `bonds:read` - Acceso a endpoints de bonos\n- `cedears:read` - Acceso a endpoints de CEDEARs\n- `stocks:read` - Acceso a endpoints de acciones\n\nEl token obtenido funcionará para **todos** los mercados incluidos en los scopes otorgados."
					}
				}
			]
		},
		{
			"name": "🏛️ BONDS - Instruments",
			"item": [
				{
					"name": "List Bond Instruments",
					"request": {
						"auth": {"type": "bearer", "bearer": [{"key": "token", "value": "{{access_token}}", "type": "string"}]},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/api/v1/bonds/instruments?limit=50",
							"host": ["{{baseUrl}}"],
							"path": ["api", "v1", "bonds", "instruments"],
							"query": [
								{"key": "sub_asset_class", "value": "HARD_DOLLAR", "disabled": true},
								{"key": "limit", "value": "50"},
								{"key": "cursor", "value": "", "disabled": true}
							]
						}
					}
				},
				{
					"name": "Get Bond Detail",
					"request": {
						"auth": {"type": "bearer", "bearer": [{"key": "token", "value": "{{access_token}}", "type": "string"}]},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/api/v1/bonds/instruments/AL30",
							"host": ["{{baseUrl}}"],
							"path": ["api", "v1", "bonds", "instruments", "AL30"]
						}
					}
				},
				{
					"name": "Search Bond Instruments",
					"request": {
						"auth": {"type": "bearer", "bearer": [{"key": "token", "value": "{{access_token}}", "type": "string"}]},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/api/v1/bonds/instruments/search?query=AL30&limit=10",
							"host": ["{{baseUrl}}"],
							"path": ["api", "v1", "bonds", "instruments", "search"],
							"query": [
								{"key": "query", "value": "AL30"},
								{"key": "limit", "value": "10"},
								{"key": "cursor", "value": "", "disabled": true}
							]
						}
					}
				}
			]
		},
		{
			"name": "📊 BONDS - Market Data",
			"item": [
				{
					"name": "Get Bond OHLC",
					"request": {
						"auth": {"type": "bearer", "bearer": [{"key": "token", "value": "{{access_token}}", "type": "string"}]},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/api/v1/bonds/market-data/AL30/ohlc?from_date=2025-01-01&to_date=2025-10-09&adjusted=false",
							"host": ["{{baseUrl}}"],
							"path": ["api", "v1", "bonds", "market-data", "AL30", "ohlc"],
							"query": [
								{"key": "from_date", "value": "2025-01-01"},
								{"key": "to_date", "value": "2025-10-09"},
								{"key": "adjusted", "value": "false"}
							]
						}
					}
				},
				{
					"name": "Get Bond Intraday",
					"request": {
						"auth": {"type": "bearer", "bearer": [{"key": "token", "value": "{{access_token}}", "type": "string"}]},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/api/v1/bonds/market-data/AL30/intraday",
							"host": ["{{baseUrl}}"],
							"path": ["api", "v1", "bonds", "market-data", "AL30", "intraday"]
						}
					}
				}
			]
		},
		{
			"name": "📈 BONDS - Yields",
			"item": [
				{
					"name": "Get Yield Curve",
					"request": {
						"auth": {"type": "bearer", "bearer": [{"key": "token", "value": "{{access_token}}", "type": "string"}]},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/api/v1/bonds/yields/curve?sub_asset_class=HARD_DOLLAR",
							"host": ["{{baseUrl}}"],
							"path": ["api", "v1", "bonds", "yields", "curve"],
							"query": [{"key": "sub_asset_class", "value": "HARD_DOLLAR"}]
						}
					}
				},
				{
					"name": "Get Historical Yield Curve",
					"request": {
						"auth": {"type": "bearer", "bearer": [{"key": "token", "value": "{{access_token}}", "type": "string"}]},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/api/v1/bonds/yields/historical-curve?sub_asset_class=HARD_DOLLAR&from_date=2025-01-01&to_date=2025-10-09",
							"host": ["{{baseUrl}}"],
							"path": ["api", "v1", "bonds", "yields", "historical-curve"],
							"query": [
								{"key": "sub_asset_class", "value": "HARD_DOLLAR"},
								{"key": "from_date", "value": "2025-01-01"},
								{"key": "to_date", "value": "2025-10-09"}
							]
						}
					}
				}
			]
		},
		{
			"name": "🧮 BONDS - Analytics",
			"item": [
				{
					"name": "Calculate Bond Pricing",
					"request": {
						"auth": {"type": "bearer", "bearer": [{"key": "token", "value": "{{access_token}}", "type": "string"}]},
						"method": "POST",
						"header": [{"key": "Content-Type", "value": "application/json"}],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"ticker\": \"AL30\",\n  \"settlement_date\": \"2025-10-15\",\n  \"yield_rate\": 15.5\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/api/v1/bonds/analytics/pricing",
							"host": ["{{baseUrl}}"],
							"path": ["api", "v1", "bonds", "analytics", "pricing"]
						}
					}
				},
				{
					"name": "Get Bond Cashflow",
					"request": {
						"auth": {"type": "bearer", "bearer": [{"key": "token", "value": "{{access_token}}", "type": "string"}]},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/api/v1/bonds/analytics/cashflow/AL30",
							"host": ["{{baseUrl}}"],
							"path": ["api", "v1", "bonds", "analytics", "cashflow", "AL30"]
						}
					}
				},
				{
					"name": "Calculate Risk Metrics",
					"request": {
						"auth": {"type": "bearer", "bearer": [{"key": "token", "value": "{{access_token}}", "type": "string"}]},
						"method": "POST",
						"header": [{"key": "Content-Type", "value": "application/json"}],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"ticker\": \"AL30\",\n  \"settlement_date\": \"2025-10-15\",\n  \"yield_rate\": 15.5\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/api/v1/bonds/analytics/risk-metrics",
							"host": ["{{baseUrl}}"],
							"path": ["api", "v1", "bonds", "analytics", "risk-metrics"]
						}
					}
				}
			]
		},
		{
			"name": "🌎 CEDEARS - Instruments",
			"item": [
				{
					"name": "List CEDEAR Instruments",
					"request": {
						"auth": {"type": "bearer", "bearer": [{"key": "token", "value": "{{access_token}}", "type": "string"}]},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/api/v1/cedears/instruments?limit=50",
							"host": ["{{baseUrl}}"],
							"path": ["api", "v1", "cedears", "instruments"],
							"query": [
								{"key": "sub_asset_class", "value": "", "disabled": true},
								{"key": "limit", "value": "50"},
								{"key": "cursor", "value": "", "disabled": true}
							]
						}
					}
				},
				{
					"name": "Get CEDEAR Detail",
					"request": {
						"auth": {"type": "bearer", "bearer": [{"key": "token", "value": "{{access_token}}", "type": "string"}]},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/api/v1/cedears/instruments/AAPL",
							"host": ["{{baseUrl}}"],
							"path": ["api", "v1", "cedears", "instruments", "AAPL"]
						}
					}
				},
				{
					"name": "Search CEDEAR Instruments",
					"request": {
						"auth": {"type": "bearer", "bearer": [{"key": "token", "value": "{{access_token}}", "type": "string"}]},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/api/v1/cedears/instruments/search?query=AAPL&limit=10",
							"host": ["{{baseUrl}}"],
							"path": ["api", "v1", "cedears", "instruments", "search"],
							"query": [
								{"key": "query", "value": "AAPL"},
								{"key": "limit", "value": "10"},
								{"key": "cursor", "value": "", "disabled": true}
							]
						}
					}
				}
			]
		},
		{
			"name": "📊 CEDEARS - Market Data",
			"item": [
				{
					"name": "Get CEDEAR OHLC",
					"request": {
						"auth": {"type": "bearer", "bearer": [{"key": "token", "value": "{{access_token}}", "type": "string"}]},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/api/v1/cedears/market-data/AAPL/ohlc?from_date=2025-01-01&to_date=2025-10-09&adjusted=false",
							"host": ["{{baseUrl}}"],
							"path": ["api", "v1", "cedears", "market-data", "AAPL", "ohlc"],
							"query": [
								{"key": "from_date", "value": "2025-01-01"},
								{"key": "to_date", "value": "2025-10-09"},
								{"key": "adjusted", "value": "false"}
							]
						}
					}
				},
				{
					"name": "Get CEDEAR Intraday",
					"request": {
						"auth": {"type": "bearer", "bearer": [{"key": "token", "value": "{{access_token}}", "type": "string"}]},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/api/v1/cedears/market-data/AAPL/intraday",
							"host": ["{{baseUrl}}"],
							"path": ["api", "v1", "cedears", "market-data", "AAPL", "intraday"]
						}
					}
				}
			]
		},
		{
			"name": "📈 STOCKS - Instruments",
			"item": [
				{
					"name": "List Stock Instruments",
					"request": {
						"auth": {"type": "bearer", "bearer": [{"key": "token", "value": "{{access_token}}", "type": "string"}]},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/api/v1/stocks/instruments?limit=50",
							"host": ["{{baseUrl}}"],
							"path": ["api", "v1", "stocks", "instruments"],
							"query": [
								{"key": "sub_asset_class", "value": "", "disabled": true},
								{"key": "limit", "value": "50"},
								{"key": "cursor", "value": "", "disabled": true}
							]
						}
					}
				},
				{
					"name": "Get Stock Detail",
					"request": {
						"auth": {"type": "bearer", "bearer": [{"key": "token", "value": "{{access_token}}", "type": "string"}]},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/api/v1/stocks/instruments/GGAL",
							"host": ["{{baseUrl}}"],
							"path": ["api", "v1", "stocks", "instruments", "GGAL"]
						}
					}
				},
				{
					"name": "Search Stock Instruments",
					"request": {
						"auth": {"type": "bearer", "bearer": [{"key": "token", "value": "{{access_token}}", "type": "string"}]},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/api/v1/stocks/instruments/search?query=GGAL&limit=10",
							"host": ["{{baseUrl}}"],
							"path": ["api", "v1", "stocks", "instruments", "search"],
							"query": [
								{"key": "query", "value": "GGAL"},
								{"key": "limit", "value": "10"},
								{"key": "cursor", "value": "", "disabled": true}
							]
						}
					}
				}
			]
		},
		{
			"name": "📊 STOCKS - Market Data",
			"item": [
				{
					"name": "Get Stock OHLC",
					"request": {
						"auth": {"type": "bearer", "bearer": [{"key": "token", "value": "{{access_token}}", "type": "string"}]},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/api/v1/stocks/market-data/GGAL/ohlc?from_date=2025-01-01&to_date=2025-10-09&adjusted=false",
							"host": ["{{baseUrl}}"],
							"path": ["api", "v1", "stocks", "market-data", "GGAL", "ohlc"],
							"query": [
								{"key": "from_date", "value": "2025-01-01"},
								{"key": "to_date", "value": "2025-10-09"},
								{"key": "adjusted", "value": "false"}
							]
						}
					}
				},
				{
					"name": "Get Stock Intraday",
					"request": {
						"auth": {"type": "bearer", "bearer": [{"key": "token", "value": "{{access_token}}", "type": "string"}]},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/api/v1/stocks/market-data/GGAL/intraday",
							"host": ["{{baseUrl}}"],
							"path": ["api", "v1", "stocks", "market-data", "GGAL", "intraday"]
						}
					}
				}
			]
		},
		{
			"name": "🏥 Health & System",
			"item": [
				{
					"name": "Health Check",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/health",
							"host": ["{{baseUrl}}"],
							"path": ["health"]
						}
					}
				},
				{
					"name": "API Info",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/",
							"host": ["{{baseUrl}}"],
							"path": [""]
						}
					}
				}
			]
		}
	],
	"variable": [
		{
			"key": "access_token",
			"value": "",
			"type": "string"
		},
		{
			"key": "bonds_token",
			"value": "",
			"type": "string"
		},
		{
			"key": "cedears_token",
			"value": "",
			"type": "string"
		},
		{
			"key": "stocks_token",
			"value": "",
			"type": "string"
		}
	]
}
